# v1.9.X

<details>

<summary>1.9.9</summary>



1. 修复Claude测试脚本
2. 修复Netflix测试脚本
3. 修复后端SSL证书验证问题
4. 重写并优化了/subinfo指令
5. 现在管理员可以使用/subinfo查看所有用户的订阅信息
6. 优化了GEO脚本内容读取
7. 优化了初始化bot信息
8. 升级依赖库 cryptography到 44.0.1

</details>

<details>

<summary>1.9.8</summary>



1. 适配动态测速地址，设置为runtime.speedFiles为一个列表，然后后端设置 slave.option.downloadURL=DYNAMIC:ALL 即可随机选择runtime.speedFiles中的一个测速地址
2. 适配规则rule.speedFiles，可覆写默认动态测速地址
3. 动态测速地址工作原理：
   * 首先需要后端配置：slave.option.downloadURL: "DYNAMIC:ALL"
   * 然后，从rule.speedFiles中（如果有）获取测速地址列表，如果不存在，则使用默认的动态测速地址（runtime.speedFiles）。
   * 如果runtime.speedFiles是空的，则回落至bot默认分配地址
4. 中止测速按钮体验优化，现在不会重复响应已经中止的测速任务
5. 配置文件中，runtime.speedFiles和rule.speedFiles可以同时存在，优先级为rule.speedFiles > runtime.speedFiles
6. runtime.speedFiles中的元素需要是完整的HTTP URL，如：http://127.0.0.1:8080/speedtest.php
7. 受限于Sub-Store许可证限制，Docker版打包镜像不再包含Sub-Store实例。
8. 为/checkslave 指令增加自定义的健康检查配置，前往 slaveConfig.healthCheck 进行配置
9. 后端选择按钮页面优化。可以附加健康检查中缓存的延迟，展示可用状态，自动隐藏掉线后端

</details>

<details>

<summary>1.9.7</summary>



1. 移除不需要的旧版分支代码
2. 优化配置模板描述信息
3. detectInvalidResults 配置现在默认为 false，不会再默认检测无效结果
4. 适配anytls协议

</details>

<details>

<summary>1.9.6</summary>



1. 支持从telegram下载订阅文件（需要为yaml格式）
2. 移除了不必要的配置项: bot.bar bot.bleft bot.bright bot.space bot.scriptText bot.analyzeText bot.speedText ，这些配置项替代品位于语言包文件
3. 翻页按钮优化，当大于5页时会有奇效

</details>

<details>

<summary>1.9.5</summary>



1. 修复空值异常导致部分测试类型(如 TEST\_PING\_TOTAL\_CONN)无法出图的问题
2. 修改默认STUN服务器地址，原来的地址已被所有者设置成空解析，目前的地址为 udp://stunserver2025.stunprotocol.org:3478
3. 丢包率现在保留为整数

</details>

<details>

<summary>1.9.4</summary>



1. 将mihomo升级到 v1.19.1 版本
2. 新的数据矩阵： TEST\_PING\_PACKET\_LOSS 用于测试丢包率
3. 优化了ping测试
4. 支持Mieru协议（仅TCP）

</details>

<details>

<summary>1.9.3</summary>



1. 新增 /about 页面，展示BOT的相关信息
2. 优化GEOIP脚本，现在判断落地IP协议栈更加准确
3. 修复全量测试在覆写GEOIP脚本时出现绘图异常的问题
4. 默认字体文件已更改文件名，若用的默认字体文件路径，请更新配置文件中的字体路径，否则会出现警告信息。
5. 修复invite功能中任务ID错误的问题

</details>

<details>

<summary>1.9.2</summary>



1. 修复HTTPS延迟排序问题
2. 由于群组测试的速率限制为每分钟20条消息（官方限制），触发限制时bot将进入慢速模式。

</details>

<details>

<summary>1.9.1</summary>



1. 修复subconverter配置无法生效
2. 现在 SSL\_CA\_FILE 环境变量将覆写默认CA证书路径 ./resources/ssl\_certs/tls-ca-bundle.pem
3. 支持从环境变量读取可供初始化bot的配置，分别是: KOIPY\_LICENSE KOIPY\_BOT\_TOKEN KOIPY\_BOT\_PROXY，对应激活码、bot-token、bot运行代理
4. checkslave支持显示进度条
5. 修复checkslave部分数据显示精度问题
6. HTTPS延迟绘图修复

</details>

<details>

<summary>1.9.0</summary>



⚠️ 破坏性改动，此版本重写了部分初始化代码，请谨慎升级！

1. 安装包文件体积优化
2. /checkslave 指令现在可以输出结果为图片(默认)
3. /checkslave?output=json 指令现在可以输出结果为json格式
4. /checkslave?output=text 可以输出结果为纯文本格式(旧版)
5. 更好的文件下载进度条显示
6. 修复实时渲染发出错误提示信息
7. 修复archlinux系统无法运行koipy的问题
8. koipy现在不再使用系统CA证书，将使用自带的CA证书，路径为 ./resouces/certs/tls-ca-bundle.pem
9. 可以通过设置环境变量 SSL\_CERT\_FILE 来指定CA证书路径
10. 代码优化，提升稳定性

</details>
