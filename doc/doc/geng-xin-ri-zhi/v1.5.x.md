# v1.5.X

## v1.5.17(2024-08-25)

1. 修复一些bug
2. 绘图结果中增加ping次数的显示
3. 新的指令 /log ，可以查看本次运行的日志，管理员可用

## v1.5.16 (2024-08-25)

1. 建立invite邀请测试的订阅链接黑名单，防止测试节点池的恶意链接导致的资源浪费。
2. 现在invite的ping测试按钮将添加标准差测试项，最大RTT测试项
3. 新增配置：bot.inviteBlacklistURL ，用于配置邀请测试里禁止测试的URL链接远程更新地址
4. 新增配置：bot.inviteBlacklistDomain ，用于配置邀请测试里禁止测试的域名远程更新地址

## v1.5.15

1. 新增MAX RTT测试项(需要miaospeed>=4.4.7)
2. 新增RTT标准差测试项(需要miaospeed>=4.4.7)
3. 新增HTTP标准差测试项(需要miaospeed>=4.4.7)
4. releases全自动化
5. 现在节点存活率默认新增以上三个测试项
6. 新的测试结果的展示方式：json格式
7. 新的指令参数：output=json, 例子: /test?output=json

## v1.5.14

1. 修复位置参数中过滤器失效，顺便改动了优先级。
2. 现在 /speed /topo 将不会受到规则覆写影响，将始终为内置指令。

## v1.5.13

1. 修复中止测速时的错误提示
2. 修复checkslave不支持带path的后端
3. 指令参数的覆写优先级将比规则的大

## v1.5.12

1. 适配miaospeed自定义ws连接路径
2. 对应文档已更新

## v1.5.11

1. 修复test在提取规则时异常跳过选择页面的问题。
2. 选择脚本页面添加仅测速和仅测拓扑的快速按钮。
3. 改进构建脚本。

## v1.5.10

koipy v1.5.10 更新日志

1. 现在支持更多的规则设置，请查看配置文件示例获取用法
2. 现在可以读取想要的规则从而快速发起测试
3. 移除clashPing配置
4. 后端配置的apiVersion默认设置1
5. 现在在脚本配置中，支持保留的脚本名字覆写配置，如: TEST\_PING\_RTT，前往配置文件示例查看用法

规则使用例子:

rules:

* name: coffee url: https:// script: \["TEST\_PING\_RTT", "TEST\_PING\_CONN"] slaveid: local runtime: sort: HTTP升序 owner: 1111111111

## v1.5.9

1. 后端兼容性修复
2. disney+、dns脚本优化

## v1.5.8

1. 后端 option 参数新增apiVersion和useClashPing，useClashPing参数设置为true会使用Clash系的测延迟算法，这样可以做到与Clash系列延迟结果一致
2. 修复拓扑入口测试双栈显示bug
3. 修复拓扑入口解析bug
4. /remove 指令实现，用来删除规则。管理员可以删除所有规则，用户只能删除自己的规则

## v1.5.7

1. 规则系统初步实现，现在可以通过 /rule 新建一个规则，这可以持久化存储订阅到本地。、
2. slaveConfig.slaves\[0].option 新增以下配置: taskTimeout、dnsServer 前往配置示例查看解释。
3. 配置重载保护。重载操作会将原来的配置备份到 config.yaml.backup，这可以防止程序破坏性崩溃或者强行关闭带来的配置丢失。
4. 拓扑图的详细地区显示将单独作为一栏。
5. 提高 /re 指令的代码鲁棒性。
6. 成功提交测试任务到后端将会有提示。
7. /rule 新增订阅的特性：

> * /rule 无参数将显示自己创建的规则&#x20;
> * 管理员可以看到所有规则名称 规则名称是唯一的，不是自己创建的规则无法使用，意味着你无法测试别人规则里面包含的订阅，管理员也不行&#x20;
> * 自己创建的规则可以覆写&#x20;
> * 目前仅适配了 /re 以及 测试指令&#x20;
> * /rule 如果不写规则名，将随机生成一个规则名 目前暂时无法在bot的前端进行规则操作，需要前往配置手动删除

## v1.5.6

1. 一些代码细节优化。
2. 支持在配置里自定义GEOIP脚本，这样拓扑测试时就会覆写后端默认的GEOIP脚本。 3 .新增 /checkslave指令 ，可检查后端在线情况。
3. 新增 /subinfo 指令，可查询订阅流量信息。

参考文档: https://koipy.gitbook.io/koipy/doc/zhi-ling-xiang-jie/checkslave

## v1.5.4

* 修复每秒速度绘图颜色不一致问题
* 更好地展示消耗流量单位
* 修正配置文件示例中默认脚本配置的路径不正确
* 新增 /re 指令，可快速重测上一次测试任务。支持参数覆写

例子:

/re https://www.google.com 覆写测试订阅地址

/re?s=local 覆写后端

/re 随便写 HK 直连 更改包含过滤器为"HK"，排除过滤器为"直连"

/re?thread=1 覆写测速线程为1（如果是测速任务）

## v1.5.3

1. 修复绘图无效白图
2. 新增速度值格式选择 MB/s 或者 Mbps
3. 可能修复的invite问题？

## v1.5.0

* 优化拓扑测试结果图，相同文本合并展示。
* 支持在配置设置是否展示入口ip段。
* 支持在配置设置是否展示双栈。

## &#x20;v1.5.1

* 适配节点测速数量限制。
* 可选择是否在选择页面显示slaveid。
* 修复invite的偶现bug。

相关配置:

```yaml
runtime:
  speedNodes: 300 # 最大测速节点数量
slaveConfig: # 后端配置
  showID: true #是否在选择后端页面展示slaveid

```

